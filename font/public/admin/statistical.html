<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="../fontawesome-free-6.4.2-web/css/all.min.css">
  <link rel="stylesheet" href="../../source/stylesheet/root.css">
  <link rel="stylesheet" href="../../source/stylesheet/admin/admin.css">
  <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
	<script src="../../source/script/admin/admin.js"></script>
  <script src="../angular/angularjs.js"></script>
	<script src="https://code.jquery.com/jquery-3.7.1.js" integrity="sha256-eKhayi8LEQwp4NKxN+CfCh+3qOVUtJn3QNZ0TciWLP4="
		crossorigin="anonymous"></script>
  <title>Document</title>
</head>
<body ng-app="AppBanHang" ng-controller="MainCtrl">
  <section id="sidebar">
		<a href="#" class="brand">
			<img src="../images/logo.png" alt="" class="img-icon">
      <img src="../images/single-logo.png" alt="" class="single-img-icon">
		</a>
		<ul class="side-menu top">
			<li>
				<a href="./admin.html">
					<i class="fa-solid fa-user"></i>
					<span class="text">Managerment</span>
				</a>
			</li>
			<li>
				<a href="./products.html">
					<i class="fa-solid fa-box"></i>
					<span class="text">Products</span>
				</a>
			</li>
			<li>
				<a href="./manafactures.html">
					<i class="fa-solid fa-industry"></i>
					<span class="text">Manafactures</span>
				</a>
			</li>
			<li>
				<a href="./customers.html">
					<i class="fa-solid fa-users"></i>
					<span class="text">Customers</span>
				</a>
			</li>
			<li>
				<a href="./bill.html">
					<i class="fa-solid fa-file-invoice"></i>
					<span class="text">Bills</span>
				</a>
			</li>
      <li>
				<a href="./receipt.html">
					<i class="fa-solid fa-file-invoice-dollar"></i>
					<span class="text">Receipts</span>
				</a>
			</li>
      <li class="active">
				<a href="./statistical.html">
					<i class="fa-solid fa-chart-simple"></i>
					<span class="text">Statistical</span>
				</a>
			</li>
		</ul>
		<ul class="side-menu">
			<li>
				<a href="#">
					<i class="fa-solid fa-wrench"></i>
					<span class="text">Settings</span>
				</a>
			</li>
			<li>
				<a href="./login.html" class="logout">
					<i class="fa-solid fa-right-from-bracket"></i>
					<span onclick="logOut()" class="text">Logout</span>
				</a>
			</li>
		</ul>
	</section>


	
  <section id="content">
		<!-- NAVBAR -->
		<nav>
			<i class="fa-solid fa-bars"></i>
			<a href="#" class="nav-link">Categories</a>
			<form action="#">
				<div class="form-input">
					<input type="search" placeholder="Search...">
					<button type="submit" class="search-btn"><i class="fa-solid fa-magnifying-glass"></i></button>
				</div>
			</form>
			<input type="checkbox" id="switch-mode" hidden>
			<label for="switch-mode" class="switch-mode"></label>
			<a href="#" class="notification">
				<i class='bx bxs-bell' ></i>
				<span class="num">8</span>
			</a>
			<a href="#" class="profile">
				<img src="../anh_nguoi.png">
			</a>
		</nav>
		<!-- NAVBAR -->

		<!-- MAIN -->
		<main>
      <div class="head-title">
				<div class="left">
					<h1>Dashboard</h1>
					<ul class="breadcrumb">
						<li>
							<a href="#">Dashboard</a>
						</li>
						<li><i class='bx bx-chevron-right'></i></li>
						<li>
							<a class="active" href="#">Home</a>
						</li>
					</ul>
				</div>
				<div class="submit">
					<div class="submit__button">
						<button ng-click="Edit(x.spId)">Lưu</button>
					</div>
				</div>
				<div class="section__parents-button">
					<div class="section__button">
						<button ng-click="Add()" type="submit">Thêm</button>
					</div>
					<!-- <div class="section__button">
						<button>Sửa</button>
					</div>
					<div class="section__button">
						<button>Xoá</button>
					</div> -->
				</div>
				<a href="#" class="btn-download">
					<i class='bx bxs-cloud-download'></i>
					<span class="text">Download PDF</span>
				</a>
			</div>
      <div class="right-section">
				<div class="section-big-parents border-right">
					<div id="chart_div" style="width: 900px; height: 400px;"></div>
			  </div>
      </div>
      <div class="section-big-parents border-right" style="margin-top: 30px;">
        <h3 class="month-show" style="margin-bottom: 12px;"></h3>
        <div class="row" style="display: flex;">
          <div class="col-4 col-s-12 padding-box" style="width: 300px;">
              <div class="box" style="background-color: #9abc32; display: flex; padding: 15px 25px;border-radius: 20px;">
                  <div class="box-left" style="font-size: 40px;line-height: 50px;margin-right:20px;"><i class="fas fa-signal"></i></div>
                  <div class="box-right">Tiền bán hàng<br><span>0</span>đ</div>
              </div>
          </div>
          <div class="col-4 col-s-12 padding-box" style="width: 300px;margin-left: 20px;">
              <div class="box" style="background-color: #6FB3E0; display: flex; padding: 15px 25px;border-radius: 20px;">
                  <div class="box-left" style="font-size: 40px;line-height: 50px;margin-right:20px;"><i class="fas fa-cloud"></i></div>
                  <div class="box-right">
                      Số đơn hàng: <span>0</span><br>
                      Số sản phẩm: <span>0</span>
                  </div>
              </div>
          </div>
          <div class="col-4 col-s-12 padding-box" style="width: 300px;margin-left: 20px;">
              <div class="box" style="background-color: #D53F; display: flex; padding: 15px 25px;border-radius: 20px;">
                  <div class="box-left" style="font-size: 40px;line-height: 50px;margin-right:20px;"><i class="fas fa-undo-alt"></i></div>
                  <div class="box-right">Khách hàng trả<br><span>0</span></div>
              </div>
          </div>
        </div>
        <table id="table" class="table-box border-right table-content-box">
					<tr class="colum">
						<th class="colum-title one">Mã hoá đơn</th>
						<th class="colum-title">Mã khách</th>
						<th class="colum-title">Ngày lập</th>
						<th class="colum-title second">Mô tả</th>
					</tr>
					<tr ng-repeat="x in listStatistic.data" class="colum-content-box">
						<th class="colum-content">{{x.hdbId}}</th>
						<th class="colum-content">{{x.kId}}</th>
						<th class="colum-content">{{x.hdbNgayLap}}</th>
						<th class="colum-content">{{x.hdbMoTa}}</th>
					</tr>
				</table>
      </div>
	  </main>
		<!-- MAIN -->
	</section>
  <script>
    var currentDate = new Date();
    var currentMonth = currentDate.getMonth() + 1;
    document.getElementsByClassName('month-show').innerHTML = 'Bảng thống kê tháng: ' + currentMonth;

    google.charts.load('current', {'packages':['corechart']});
    google.charts.setOnLoadCallback(drawVisualization);

    function drawVisualization() {
      var data = google.visualization.arrayToDataTable([
          ['Month', 'Bolivia'],
          ['JAN',  6],
          ['FEB',  8],
          ['MAR',  7],
          ['APR',  3],
          ['MAY',  6],
          ['JUN',  11],
          ['JUL',  9],
          ['AUG',  6],
          ['SEP', 8]
      ]);

      var options = {
        title : 'Statistics of sales have been made',
        hAxis: {title: 'Invoice statistics in the past year'},
        seriesType: 'bars',
        series: {5: {type: 'line'}}
      };

      var chart = new google.visualization.ComboChart(document.getElementById('chart_div'));
      chart.draw(data, options);
    }


    var app = angular.module('AppBanHang', [])
		app.controller('MainCtrl', function ($scope, $http, $window) {
      $scope.pageIndex = 1;
      $scope.pageSize = 5;
      $scope.fr_NgayTao = '2023-2-15';
      $scope.to_NgayTao = '2023-6-20';

      $scope.searchBillByMonth = function (data) {
        $http({
          method: 'POST',
          data,
          url: 'https://localhost:44390/api/Bill/search-bill-by-month',
        }).then(function (response) {
          $scope.listStatistic = response.data;
          var total = Number(response.data.totalItems);
        });
      };

      $scope.searchBillByMonth({
        page: $scope.pageIndex,
        pageSize: $scope.pageSize,
        fr_NgayTao: $scope.fr_NgayTao,
        to_NgayTao: $scope.to_NgayTao
      })
    })
  </script>
	<script src="../../source/script/admin/admin.js"></script>
</body>
</html>